<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE header PUBLIC "-//Boost//DTD BoostBook XML V1.0//EN"
  "http://www.boost.org/tools/boostbook/dtd/boostbook.dtd">
<!--
  Hamigaki.Binary Library Document Source

  Copyright Takeshi Mouri 2007.
  Use, modification, and distribution are subject to the
  Boost Software License, Version 1.0. (See accompanying file
  LICENSE_1_0.txt or copy at http://www.boost.org/LICENSE_1_0.txt)

  See http://hamigaki.sourceforge.jp/libs/binary for library home page.
-->
<header name="hamigaki/binary/binary_io.hpp">
  <namespace name="hamigaki">
    <struct name="binary_io_traits">
      <template>
        <template-nontype-parameter name="E">
          <type>endianness</type>
        </template-nontype-parameter>
        <template-type-parameter name="T" />
      </template>

      <method name="read" specifiers="static">
        <type>void</type>
        <parameter name="s">
          <paramtype>const char*</paramtype>
        </parameter>
        <parameter name="x">
          <paramtype>T&amp;</paramtype>
        </parameter>
        <description>
          <para>特殊化された<classname>struct_traits</classname>&lt;T&gt;が存在すれば、<code>typename <classname>struct_traits</classname>&lt;T&gt;::members</code>の内容に従い、構造体の各メンバを読み出す。</para>
          <para><code>T</code>が符号付き整数または符号なし整数の場合、<code>x = hamigaki::decode_int&lt;E,sizeof(x)&gt;(s)</code>を行う。</para>
          <para><code>T</code>が上記の型の配列である場合は、配列の要素数だけ上記の操作を繰り返す。</para>
        </description>
      </method>

      <method name="write" specifiers="static">
        <type>void</type>
        <parameter name="s">
          <paramtype>char*</paramtype>
        </parameter>
        <parameter name="x">
          <paramtype>const T&amp;</paramtype>
        </parameter>
        <description>
          <para>特殊化された<classname>struct_traits</classname>&lt;T&gt;が存在すれば、<code>typename <classname>struct_traits</classname>&lt;T&gt;::members</code>の内容に従い、構造体の各メンバを書き出す。</para>
          <para><code>T</code>が符号付き整数または符号なし整数の場合、<code>hamigaki::encode_int&lt;E,sizeof(x)&gt;(s, x)</code>を呼び出す。</para>
          <para><code>T</code>が上記の型の配列である場合は、配列の要素数だけ上記の操作を繰り返す。</para>
        </description>
      </method>
    </struct>

    <free-function-group name="binary input functions">
      <function name="binary_read">
        <template>
          <template-type-parameter name="T" />
        </template>
        <type>void</type>
        <parameter name="s">
          <paramtype>const char*</paramtype>
        </parameter>
        <parameter name="x">
          <paramtype>T&amp;</paramtype>
        </parameter>
        <purpose><simpara>実行環境のエンディアンに従い、バイナリ入力を行う。</simpara></purpose>
        <effects><simpara><code><classname>binary_io_traits</classname>&lt;native,T&gt;::read(s, x);</code></simpara></effects>
      </function>

      <function name="binary_read">
        <template>
          <template-nontype-parameter name="E">
            <type>endianness</type>
          </template-nontype-parameter>
          <template-type-parameter name="T" />
        </template>
        <type>void</type>
        <parameter name="s">
          <paramtype>const char*</paramtype>
        </parameter>
        <parameter name="x">
          <paramtype>T&amp;</paramtype>
        </parameter>
        <purpose><simpara>指定したエンディアンでバイナリ入力を行う。</simpara></purpose>
        <effects><simpara><code><classname>binary_io_traits</classname>&lt;E,T&gt;::read(s, x);</code></simpara></effects>
      </function>

      <function name="binary_read">
        <template>
          <template-type-parameter name="T" />
        </template>
        <type>T</type>
        <parameter name="s">
          <paramtype>const char*</paramtype>
        </parameter>
        <purpose><simpara>実行環境のエンディアンに従い、バイナリ入力を行う。</simpara></purpose>
        <effects><para><programlisting><![CDATA[T x;
hamigaki::binary_read(s, x);
return x;]]></programlisting></para></effects>
      </function>

      <function name="binary_read">
        <template>
          <template-nontype-parameter name="E">
            <type>endianness</type>
          </template-nontype-parameter>
          <template-type-parameter name="T" />
        </template>
        <type>T</type>
        <parameter name="s">
          <paramtype>const char*</paramtype>
        </parameter>
        <purpose><simpara>指定したエンディアンでバイナリ入力を行う。</simpara></purpose>
        <effects><para><programlisting><![CDATA[T x;
hamigaki::binary_read<E>(s, x);
return x;]]></programlisting></para></effects>
      </function>
    </free-function-group>

    <free-function-group name="binary output functions">
      <function name="binary_write">
        <template>
          <template-type-parameter name="T" />
        </template>
        <type>void</type>
        <parameter name="s">
          <paramtype>char*</paramtype>
        </parameter>
        <parameter name="x">
          <paramtype>const T&amp;</paramtype>
        </parameter>
        <purpose><simpara>実行環境のエンディアンに従い、バイナリ出力を行う。</simpara></purpose>
        <effects><simpara><code><classname>binary_io_traits</classname>&lt;native,T&gt;::write(s, x);</code></simpara></effects>
      </function>

      <function name="binary_write">
        <template>
          <template-nontype-parameter name="E">
            <type>endianness</type>
          </template-nontype-parameter>
          <template-type-parameter name="T" />
        </template>
        <type>void</type>
        <parameter name="s">
          <paramtype>char*</paramtype>
        </parameter>
        <parameter name="x">
          <paramtype>const T&amp;</paramtype>
        </parameter>
        <purpose><simpara>指定したエンディアンでバイナリ出力を行う。</simpara></purpose>
        <effects><simpara><code><classname>binary_io_traits</classname>&lt;E,T&gt;::write(s, x);</code></simpara></effects>
      </function>
    </free-function-group>
  </namespace>
</header>
